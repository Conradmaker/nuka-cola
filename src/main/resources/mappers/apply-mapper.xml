<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="apply-mapper">
	
	<resultMap id="applyResultSet" type="Apply">
		<result column="apply_no" property="applyNo"/>
		<result column="apply_comment" property="applyComment"/>
		<result column="apply_prog" property="applyProg"/>
		<result column="created_at" property="createdAt"/>
		<result column="updated_at" property="updatedAt"/>
		<result column="user_no" property="userNo"/>
		<result column="recruit_no" property="recruitNo"/>
	</resultMap>
	
	<resultMap id="applyHistoryResultSet" type="Bookmark">
		<result column="recruit_title" property="recruitTitle"/>
		<result column="recruit_requ" property="recruitRequ"/>
		<result column="recruit_dl" property="recruitDl"/>
		<result column="apply_prog" property="applyProg"/>
		<result column="apply_no" property="applyNo"/>
		<result column="user_no" property="userNo"/>
		<result column="created_at" property="createdAt"/>
	</resultMap>
	
	
	<select id="selectApplyList" parameterType="Apply"
			resultMap="applyHistoryResultSet">
		select
		       recruit_title
		     , recruit_requ
		     , to_char(r.created_at, 'YYYY-MM-DD') "created_at"
		     , recruit_dl
		     , a.apply_prog
		     , a.apply_no
		     , to_char(a.created_at, 'YYYY-MM-DD') "created_at"
		     , user_no
		  from recruits r
		  join applies a on (r.recruit_no = a.recruit_no)
		where user_no = #{userNo}	
	
	</select>
	
	<select id="selectApplyCount" resultType="_int" parameterType="_int">
        select count(*) 
          from APPLIES 
         where RECRUIT_NO = #{rno}
    </select>
	
	
	
	
</mapper>
